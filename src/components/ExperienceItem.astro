---
import type { SkillType } from '@/common/data';
import { skills } from '../common/data';
import Skill from './Skill.astro';

export interface ExperienceItemProps {
  title: string;
  company: string;
  date: string;
  description: string;
  techStack: string[];
}

const { title, company, date, description, techStack } =
  Astro.props as ExperienceItemProps;

const skillList: SkillType[] = techStack
  .map((skill) => skills.find((s) => s.name === skill))
  .filter((s) => s !== undefined);
---

<div class="experience-item">
  <div class="experience-item-header">
    <div>
      <p>{company}</p>
      <h3>{title}</h3>
    </div>
    <p>{date}</p>
  </div>
  <div class="experience-item-content">
    <div>
      {skillList.map((skill) => <Skill {...skill} />)}
    </div>
    <p>{description}</p>
  </div>
</div>

<style>
  .experience-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  .experience-item-header {
    align-items: center;
    display: flex;
    justify-content: space-between;
  }
  .experience-item-content {
    margin-left: 0.5rem;
    margin-right: 0.5rem;
    padding: 0.5rem;
    border: 1px solid rgb(126, 119, 119);
    border-radius: 0.5rem;
    display: grid;
    grid-template-columns: 1fr 3fr;
    gap: 0.5rem;
  }
  .experience-item-content > * {
    width: 100%;
  }
</style>
